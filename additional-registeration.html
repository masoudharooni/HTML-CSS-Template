<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>اطلاعات تکمیلی</title>
    <link rel="stylesheet" href="./css/additional-registeration.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/css/all.min.css"
        integrity="sha512-xh6O/CkQoPOWDdYTDqeRdPCVd1SpvCA9XXcUnZS2FmJNp1coAFzvtCN9BmamE+4aHK8yyUHUSCcJHgXloTyT2A=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />

    <link rel="stylesheet" href="plugin/Persian-Jalali-Calendar-Data-Picker-Plugin/dist/kamadatepicker.min.css">

</head>

<body>
    <div class="container">

        <header id="header">
            <div class="header-info">
                <p>ثبت اطلاعات تکمیلی متقاضی</p>
            </div>
        </header>

        <div class="table-container">
            <p class="table-title">آدرس</p>
            <span class="table-icon">
                <i id="address-save-icon" class="fas fa-floppy-disk" aria-hidden="true"></i>
                <i id="address-plus-icon" class="fas fa-plus"></i>
            </span>

            <table id="address-table">
                <tr>
                    <th></th>
                    <th>عنوان</th>
                    <th>منطقه جغرافیایی</th>
                    <th>آدرس</th>
                    <th>تلفن</th>
                    <th>کد پستی</th>
                    <th>فاکس</th>
                    <th>ایمیل</th>
                    <th></th>
                </tr>


            </table>

        </div>

        <div class="table-container">
            <p class="table-title">افراد مرتبط</p>
            <span class="table-icon">
                <i id="other-people-save-icon" class="fas fa-floppy-disk" aria-hidden="true"></i>
                <i id="other-people-plus-icon" class="fas fa-plus"></i>
            </span>

            <table id="other-people-table">
                <tr>
                    <th></th>
                    <th>عنوان</th>
                    <th>نام</th>
                    <th>نام خانوادگی</th>
                    <th>کدملی</th>
                    <th>شماره تلفن همراه</th>
                    <th>نام پدر</th>
                    <th>تاریخ</th>
                    <th>شماره شناسنامه</th>
                    <th>تحصیلات</th>
                    <th>شغل</th>
                    <th>توضیحات</th>
                    <th></th>
                </tr>
            </table>

        </div>

        <div class="let-side">
            <footer id="footer">
                <div class="left-side">
                    <div class="input-container">
                        <input class="submit-btn" type="submit" value="ورود">
                    </div>
                </div>
            </footer>
        </div>



        <!-- address modal container -->
        <div id="address-modal" class="modal-container">
            <div class="address-form-container">

                <div class="modal-header">
                    <p>آدرس</p>
                </div>

                <form id="address-form" action="" method="post">
                    <div class="right-side">
                        <div class="input-container">
                            <label for="title">
                                <span> عنوان</span>
                            </label>
                            <input id="title" class="input" name="title" type="text" placeholder="عنوان را وارد کنید"
                                required>
                        </div>

                        <div class="input-container">
                            <label for="address">
                                <span> آدرس</span>
                            </label>
                            <input id="address" class="input" name="address" type="text" placeholder="آدرس را وارد کنید"
                                required>
                        </div>

                        <div class="input-container">
                            <label for="telephone">
                                <span> تلفن</span>
                            </label>
                            <input id="telephone" class="input" name="telephone" type="number"
                                placeholder="تلفن را وارد کنید" required>
                        </div>

                        <div class="input-container">
                            <label for="post-code">
                                <span> کدپستی</span>
                            </label>
                            <input id="post-code" class="input" name="post-code" type="number"
                                placeholder="کدپستی را وارد کنید" required>
                        </div>
                    </div>

                    <div class="left-side">
                        <div class="input-container">
                            <label for="fax">
                                <span> فاکس</span>
                            </label>
                            <input id="fax" class="input" name="fax" type="number" placeholder="فاکس را وارد کنید"
                                required>
                        </div>

                        <div class="input-container">
                            <label for="email">
                                <span> ایمیل</span>
                            </label>
                            <input id="email" class="input" name="email" type="email" placeholder="ایمیل را وارد کنید"
                                required>
                        </div>

                        <div class="input-container">
                            <label for="location">
                                <span>منطقه جغرافیایی</span>
                            </label>
                            <div class="custom-select">
                                <select id="location" name="location" class="input" required>
                                    <option value="اصفهان">اصفهان</option>
                                    <option value="نجف آباد">نجف آباد</option>
                                    <option value="خمینی شهر">خمینی شهر </option>
                                </select>
                            </div>
                        </div>
                    </div>
                    <div class="clearfix"></div>
                    <div class="modal-footer">
                        <div class="submit-container">
                            <input id="address-cansell-btn" type="button" class="modal-btn cansell-btn" value="انصراف">
                            <input id="addredss-submit-btn" type="submit" class="modal-btn address-submit"
                                value="تایید">
                        </div>
                    </div>
                </form>
            </div>
        </div>
        <!-- address modal container -->



        <!-- other people modal container -->
        <div id="other-people-modal" class="modal-container">
            <div class="address-form-container">

                <div class="modal-header">
                    <p>افراد مرتبط</p>
                </div>

                <form id="other-people-form" action="" method="post">
                    <div class="right-side">

                        <div class="input-container">
                            <label for="name">
                                <span> نام </span>
                            </label>
                            <input id="name" class="input" name="name" type="text" placeholder="نام را وارد کنید"
                                required>
                        </div>

                        <div class="input-container">
                            <label for="national_code">
                                <span> کد ملی</span>
                            </label>
                            <input id="national_code" class="input" name="national_code" type="number"
                                placeholder="کد ملی را وارد کنید" required>
                        </div>

                        <div class="input-container">
                            <label for="father_name">
                                <span> نام پدر</span>
                            </label>
                            <input id="father_name" class="input" name="father_name" type="number"
                                placeholder="نام پدر را وارد کنید" required>
                        </div>

                        <div class="input-container">
                            <label for="job">
                                <span> شغل</span>
                            </label>
                            <input id="job" class="input" name="job" type="number" placeholder="شغل را وارد کنید"
                                required>
                        </div>


                        <div class="input-container">
                            <label for="date_of_birthday">
                                <span>تاریخ تولد: </span>
                            </label>
                            <input id="date_of_birthday" class="input" required>
                        </div>

                        <div class="input-container">
                            <label for="education">
                                <span>تحصیلات</span>
                            </label>
                            <div class="custom-select">
                                <select id="education" name="education" class="input" required>
                                    <option value="دیپلم">دیپلم</option>
                                    <option value="کاردانی">کاردانی</option>
                                    <option value="کارشناسی">کارشناسی </option>
                                    <option value="کارشناسی ارشد">کارشناسی ارشد </option>
                                </select>
                            </div>
                        </div>

                    </div>

                    <div class="left-side">

                        <div class="input-container">
                            <label for="family_name">
                                <span> نام خانوادگی</span>
                            </label>
                            <input id="family_name" class="input" name="family_name" type="text"
                                placeholder="نام خانوادگی را وارد کنید" required>
                        </div>

                        <div class="input-container">
                            <label for="id_code">
                                <span> شماره شناسنامه</span>
                            </label>
                            <input id="id_code" class="input" name="id_code" type="number"
                                placeholder="شماره شناسنامه را وارد کنید" required>
                        </div>



                        <div class="input-container">
                            <label for="phone_number">
                                <span> شماره تلفن همراه</span>
                            </label>
                            <input id="phone_number" class="input" name="phone_number" type="number"
                                placeholder="شماره تلفن همراه را وارد کنید" required>
                        </div>

                        <div class="input-container">
                            <label for="description">
                                <span> توضیحات</span>
                            </label>
                            <input id="description" class="input" name="description" type="number"
                                placeholder="توضیحات را وارد کنید" required>
                        </div>

                        <div class="input-container">
                            <label for="title">
                                <span>عنوان</span>
                            </label>
                            <div class="custom-select">
                                <select id="title" name="title" class="input" required>
                                    <option value="مدیر عامل">مدیر عامل</option>
                                    <option value="پدر">پدر</option>
                                    <option value="مادر">مادر </option>
                                </select>
                            </div>
                        </div>







                    </div>
                    <div class="clearfix"></div>
                    <div class="modal-footer">
                        <div class="submit-container">
                            <input id="other-people-cansell-btn" type="button" class="modal-btn cansell-btn"
                                value="انصراف">
                            <input id="addredss-submit-btn" type="submit" class="modal-btn address-submit"
                                value="تایید">
                        </div>
                    </div>
                </form>
            </div>
        </div>
        <!-- other people modal container -->



    </div>

    <script src="//code.jquery.com/jquery.min.js"></script>
    <script src="./plugin/Persian-Jalali-Calendar-Data-Picker-Plugin/dist/kamadatepicker.holidays.js"></script>
    <script src="./plugin/Persian-Jalali-Calendar-Data-Picker-Plugin/dist/kamadatepicker.min.js"></script>
    <script>

        $(document).ready(function () {


            // < !--user - type select script-- >
            var x, i, j, l, ll, selElmnt, a, b, c;
            x = document.getElementsByClassName("custom-select");
            l = x.length;
            for (i = 0; i < l; i++) {
                selElmnt = x[i].getElementsByTagName("select")[0];
                ll = selElmnt.length;
                a = document.createElement("DIV");
                a.setAttribute("class", "select-selected");
                a.innerHTML = selElmnt.options[selElmnt.selectedIndex].innerHTML;
                x[i].appendChild(a);
                b = document.createElement("DIV");
                b.setAttribute("class", "select-items select-hide");
                for (j = 1; j < ll; j++) {
                    c = document.createElement("DIV");
                    c.innerHTML = selElmnt.options[j].innerHTML;
                    c.addEventListener("click", function (e) {
                        var y, i, k, s, h, sl, yl;
                        s = this.parentNode.parentNode.getElementsByTagName("select")[0];
                        sl = s.length;
                        h = this.parentNode.previousSibling;
                        for (i = 0; i < sl; i++) {
                            if (s.options[i].innerHTML == this.innerHTML) {
                                s.selectedIndex = i;
                                h.innerHTML = this.innerHTML;
                                y = this.parentNode.getElementsByClassName("same-as-selected");
                                yl = y.length;
                                for (k = 0; k < yl; k++) {
                                    y[k].removeAttribute("class");
                                }
                                this.setAttribute("class", "same-as-selected");
                                break;
                            }
                        }
                        h.click();
                    });
                    b.appendChild(c);
                }
                x[i].appendChild(b);
                a.addEventListener("click", function (e) {
                    e.stopPropagation();
                    closeAllSelect(this);
                    this.nextSibling.classList.toggle("select-hide");
                    this.classList.toggle("select-arrow-active");
                });
            }
            function closeAllSelect(elmnt) {
                var x, y, i, xl, yl, arrNo = [];
                x = document.getElementsByClassName("select-items");
                y = document.getElementsByClassName("select-selected");
                xl = x.length;
                yl = y.length;
                for (i = 0; i < yl; i++) {
                    if (elmnt == y[i]) {
                        arrNo.push(i)
                    } else {
                        y[i].classList.remove("select-arrow-active");
                    }
                }
                for (i = 0; i < xl; i++) {
                    if (arrNo.indexOf(i)) {
                        x[i].classList.add("select-hide");
                    }
                }
            }
            /*if the user clicks anywhere outside the select box,
            then close all select boxes:*/
            document.addEventListener("click", closeAllSelect);
            // user  type select script



            // address modal
            $('#address-plus-icon').click(function (e) {
                $('#address-modal').css('display', 'block');
            });

            $('#address-cansell-btn').click(function (e) {

                $('#address-modal').css('display', 'none');
            });

            $('#address-save-icon').click(function (e) {
                alert("سیو شد");
            });

            $('form#address-form').submit(function (e) {
                e.preventDefault();
                let countOfRows = document.getElementById('address-table').rows.length;
                let currentRow = countOfRows++;
                const form = $('form#address-form');
                let formData = form.serializeArray();
                $(`
                    <tr>
                        <td data-rowId="${currentRow}"></td>
                        <td>${formData[0]['value']}</td>
                        <td>${formData[6]['value']}</td>
                        <td>${formData[1]['value']}</td>
                        <td>${formData[2]['value']}</td>
                        <td>${formData[3]['value']}</td>
                        <td>${formData[4]['value']}</td>
                        <td>${formData[5]['value']}</td>
                        <td class="delete-icon-container" title="پاک کردن">
                            <i data-deleteId="${currentRow}" class="fas fa-trash delete-icon  delete-address-icon"></i>
                        </td>
                    </tr>
                `).appendTo('table#address-table');
                $('#address-modal').css('display', 'none');
                // English numbers to Persian
                traverse(document.body);


                // remove address
                $('.delete-address-icon').click(function (e) {
                    const id = $(this).attr('data-deleteId');
                    deleteRow('address-table', id);
                });
                function deleteRow(tableId, expectedId) {
                    let tableRows = document.getElementById(tableId).rows;
                    for (let index = 1; index < tableRows.length; index++) {
                        let row = tableRows[index];
                        let rowId = row.querySelector('td').getAttribute('data-rowId');
                        if (rowId == expectedId) {
                            row.remove();
                        }
                    }
                }
                // remove address



            });
        });
        // address modal



        // other people modal
        $('#other-people-plus-icon').click(function (e) {
            $('.modal-container').css('display', 'block');
        });

        $('#other-people-cansell-btn').click(function (e) {
            $('.modal-container').css('display', 'none');
        });

        $('#other-people-save-icon').click(function (e) {
            alert("سیو شد");
        });

        $('form#other-people-form').submit(function (e) {
            e.preventDefault();
            let countOfRows = document.getElementById('address-table').rows.length;
            let currentRow = countOfRows++;
            const form = $('form#address-form');
            let formData = form.serializeArray();
            $(`
                    <tr>
                        <td data-rowId="${currentRow}"></td>
                        <td>${formData[0]['value']}</td>
                        <td>${formData[6]['value']}</td>
                        <td>${formData[1]['value']}</td>
                        <td>${formData[2]['value']}</td>
                        <td>${formData[3]['value']}</td>
                        <td>${formData[4]['value']}</td>
                        <td>${formData[5]['value']}</td>
                        <td class="delete-icon-container" title="پاک کردن">
                            <i data-deleteId="${currentRow}" class="fas fa-trash delete-icon  delete-address-icon"></i>
                        </td>
                    </tr>
                `).appendTo('table#address-table');
            $('#address-modal').css('display', 'none');
            // English numbers to Persian
            traverse(document.body);


            // remove address
            $('.delete-address-icon').click(function (e) {
                const id = $(this).attr('data-deleteId');
                deleteRow('address-table', id);
            });
            function deleteRow(tableId, expectedId) {
                let tableRows = document.getElementById(tableId).rows;
                for (let index = 1; index < tableRows.length; index++) {
                    let row = tableRows[index];
                    let rowId = row.querySelector('td').getAttribute('data-rowId');
                    if (rowId == expectedId) {
                        row.remove();
                    }
                }
            }
            // remove address



        });

        // other people modal


        // convertion english numbers to persian
        persian = { 0: '۰', 1: '۱', 2: '۲', 3: '۳', 4: '۴', 5: '۵', 6: '۶', 7: '۷', 8: '۸', 9: '۹' };
        function traverse(el) {
            if (el.nodeType == 3) {
                var list = el.data.match(/[0-9]/g);
                if (list != null && list.length != 0) {
                    for (var i = 0; i < list.length; i++)
                        el.data = el.data.replace(list[i], persian[list[i]]);
                }
            }
            for (var i = 0; i < el.childNodes.length; i++) {
                traverse(el.childNodes[i]);
            }
        }
        // convertion english numbers to persian


        // persian date Picker
        kamaDatepicker('date_of_birthday', {
            forceFarsiDigits: true,
            buttonsColor: "#ECA400",
            markToday: true,
            markHolidays: true,
            placeholder: '1401/01/01'
        });
        kamaDatepicker('date_of_registration', {
            forceFarsiDigits: true,
            buttonsColor: "#ECA400",
            markToday: true,
            markHolidays: true,
            placeholder: '1401/01/01'
        });


    // persian date Picker


    </script>

</body>

</html>